<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ComparableSet.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Java Lattices</a> &gt; <a href="index.source.html" class="el_package">lattice</a> &gt; <span class="el_source">ComparableSet.java</span></div><h1>ComparableSet.java</h1><pre class="source lang-java linenums">package lattice;

/*
 * ComparableSet.java
 *
 * last update on March 2010
 *
 */

import java.util.StringTokenizer;
import java.util.TreeSet;
/**
* This class gives a minimal representation of a comparable set where sets
* are compared using the lectic order.
*
* This class extends class `TreeSet`, implements class `Comparable` and provides
* a `compareTo` method that implements the lectic order between two sets. 
* Therefore, a comparable set can be stored in a sorted collection, and in particular in a sorted set where
* set operations are provided.
*
* The lectic order extends the inclusion, and is defined only for comparable elements,
* i.e. elements that can be sorted, as follows:
*
* &quot;a set A is smaller than a set B iff there exists an element in B\A
* such that any smaller element belonging to A also belongs to B.&quot;
* 
 * Copyright: 2013 University of La Rochelle, France
 *
 * License: http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.html CeCILL-B license
 *
 * This file is part of lattice, free package. You can redistribute it and/or modify
 * it under the terms of CeCILL-B license.
 *
 * @author Karell Bertet
 * @version 2013
 */
public class ComparableSet extends TreeSet implements Comparable, Cloneable
{

	/* ------------- CONSTRUCTORS ------------------ */
	/** Constructs a new and empty ComparableSet
	 */
	public ComparableSet () {
<span class="fc" id="L44">		super();</span>
<span class="fc" id="L45">	}</span>
    /** Constructs a new ComparableSet with the set from the specified set
	 * @param S a comparable set
	 */
	public ComparableSet (TreeSet&lt;Comparable&gt; S) {
<span class="fc" id="L50">		super(S);</span>
<span class="fc" id="L51">	}</span>

	/* --------------- OVERLAPPING METHODS ------------ */

	/** Returns a String representation of this component without spaces */
 	public String toFile () {
<span class="nc" id="L57">		String res=&quot;&quot;;</span>
<span class="nc" id="L58">		StringTokenizer st = new StringTokenizer(this.toString());</span>
<span class="nc bnc" id="L59" title="All 2 branches missed.">		while (st.hasMoreTokens())</span>
<span class="nc" id="L60">			res+=st.nextToken();</span>
<span class="nc" id="L61">		return res;</span>
	}
	/** Compares this component with the specified one
	* @return true or false as this componant is equals to the specified object.
	*/
    public boolean equals (Object o) {
        //if (!(o instanceof lattice.ComparableSet)) return false;
<span class="pc bpc" id="L68" title="1 of 2 branches missed.">        if (!(o instanceof ComparableSet)) return false;</span>
<span class="fc" id="L69">        ComparableSet A = (ComparableSet) o;</span>
<span class="fc" id="L70">        return (super.equals(A));</span>
    }

    /** Returns a copy of this component **/
    public ComparableSet copy() {
<span class="nc" id="L75">        return new ComparableSet((TreeSet)super.clone());</span>
    }


   /** Compares this component with those in parameter according to the lectic order.
    *
	* The lectic order defines a sort on sets of elements extending the inclusion order
    * as follows:
    *
    * A set A is smaller than a set B iff there exists an element in B\A
    * such that any smaller element belonging to A also belongs to B.
    * The result is zero if the identifiers are equal; 1 if this component's identifier is greater,
	* and -1 otherwise. 
	* This comparison method is needed to define a natural and total sort on a sets.
	* It allows to use sets of this class in a sorted collection
	* @param o the specified element to be compared with this component
	* @return a negative integer, zero, or a positive integer as this component is less than,
	* equal to, or greater than the specified object according to the lectic order.
	*/    
   public int compareTo (Object o) {
<span class="pc bpc" id="L95" title="1 of 2 branches missed.">        if (!(o instanceof ComparableSet)) return -1;</span>
        // case of equality between this component and o
<span class="pc bpc" id="L97" title="1 of 2 branches missed.">        if (this.equals(o)) return 0;</span>
        // test if this component is smaller than B by lectic order
<span class="nc" id="L99">        ComparableSet B = (ComparableSet) o;</span>
        // computes index i of the first element in B minus A
        // if i doesn't exist, then this component is not smaller than B by lectic order
<span class="nc" id="L102">		TreeSet&lt;Comparable&gt; BminusA = new TreeSet(B);</span>
<span class="nc" id="L103">        BminusA.removeAll(this);</span>
<span class="nc bnc" id="L104" title="All 2 branches missed.">        if (BminusA.isEmpty()) return 1;</span>
<span class="nc" id="L105">        Comparable i = BminusA.first();</span>
        // compute this inter {1, ...,i-1}
<span class="nc" id="L107">        TreeSet AiMinus1 = new TreeSet();</span>
<span class="nc bnc" id="L108" title="All 2 branches missed.">        for (Object c : this)</span>
<span class="nc bnc" id="L109" title="All 2 branches missed.">            if (i.compareTo(c)&gt;=1) AiMinus1.add(c);</span>
        // compute B inter {1, ...,i-1}
<span class="nc" id="L111">        TreeSet BiMinus1 = new TreeSet();</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">        for (Object c : B)</span>
<span class="nc bnc" id="L113" title="All 2 branches missed.">            if (i.compareTo(c)&gt;=1) BiMinus1.add(c);</span>
        // if Aiminus1 and Biminus1 are equal then this component is smaller than B by lectic order
<span class="nc bnc" id="L115" title="All 2 branches missed.">        if  (AiMinus1.equals(BiMinus1))</span>
<span class="nc" id="L116">            return -1;</span>
        else
<span class="nc" id="L118">            return 1;</span>
		}
}// end of ComparableSe
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312101107</span></div></body></html>